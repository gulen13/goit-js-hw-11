{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,uCAMA,MAAMC,EAAeC,SAASC,cAAc,gBACtCC,EAAgBF,SAASC,cAAc,YACvCE,EAAgBH,SAASC,cAAc,cAE7CE,EAAcC,UAAUC,IAAI,aAE5B,MAAMC,EAAa,IAAI,EAAAC,EAAAC,YAEvB,IAAIC,EAAW,IAAIC,EAAAC,GAAJ,CAAmB,aAAc,CAC9CC,aAAc,MACdC,aAAc,MAgFhBd,EAAae,iBAAiB,UA7EHC,MAAMC,IAC/BA,EAAMC,iBACNX,EAAWY,YA8DXhB,EAAciB,UAAY,GA3D1B,MAAMC,EAAcJ,EAAMK,cAAcC,SAAsB,YAAEC,MAAMC,OAAOC,cAG7E,GAFAnB,EAAWoB,MAAQN,EAEC,KAAhBA,EAGF,OAFArB,EAAa4B,aACb9B,EAAA+B,OAAOC,KAAK,8BAA+B,CAAEC,cAAc,IAI7D,IACE,MAAQC,KAAMC,EAAQC,UAAWC,EAAeC,MAAOC,SAAmB9B,EAAW+B,cAErF,GAAiB,IAAbD,EAGF,OAFAjC,EAAcC,UAAUC,IAAI,kBAC5BR,EAAA+B,OAAOU,QAAQ,2EAA4E,CAAER,cAAc,IAIzGI,EAAgB5B,EAAWiC,KAAOjC,EAAWkC,QAC/CrC,EAAcC,UAAUC,IAAI,aAE5BF,EAAcC,UAAUqC,OAAO,aAGjC5C,EAAA+B,OAAOc,QAAQ,oBAAoBR,YAAyB,CAAEJ,cAAc,KAE5E,EAAAa,EAAAC,oBAAmBZ,GAEnBvB,EAASoC,S,CAET,MAAOC,GACPC,QAAQC,IAAIF,E,KA0ChB3C,EAAcW,iBAAiB,SArCJC,UACzBT,EAAW2C,gBAEX,IACE,MAAQlB,KAAMC,EAAQC,UAAWC,EAAeC,MAAOC,SAAmB9B,EAAW+B,cAEjFH,EAAgB5B,EAAWiC,KAAOjC,EAAWkC,UAC/CrC,EAAcC,UAAUC,IAAI,aAC5BR,EAAA+B,OAAOC,KAAK,6DAA8D,CAAEC,cAAc,MAG5F,EAAAa,EAAAC,oBAAmBZ,GAEnBvB,EAASoC,UAab,WACE,MAAQK,OAAQC,GACdjD,EAAckD,kBAAkBC,wBAElCC,OAAOC,SAAS,CACdC,IAAkB,EAAbL,EACLM,SAAU,U,CAjBVC,E,CAEA,MAAOZ,GACPC,QAAQC,IAAIF,E","sources":["src/partials/JS/01-load-more.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport { PixabayAPI } from './pixabay-API';\nimport { createGalleryCards } from './createGallery';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst searchFormEl = document.querySelector('.search-form');\nconst galleryListEl = document.querySelector('.gallery');\nconst loadMoreBtnEl = document.querySelector('.load-more');\n\nloadMoreBtnEl.classList.add('is-hidden');\n\nconst pixabayApi = new PixabayAPI();\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: \"alt\",\n  captionDelay: 250,\n});\n\nconst onSearchFormSubmit = async event => {\n  event.preventDefault();\n  pixabayApi.pageReset();\n  clearMarkup();\n\n  const searchQuery = event.currentTarget.elements['searchQuery'].value.trim().toLowerCase();\n  pixabayApi.query = searchQuery;\n\n  if (searchQuery === '') {\n    searchFormEl.reset();\n    Notify.info('Please enter search request', { clickToClose: true, });\n    return;\n  }\n\n  try {\n    const { hits: images, totalHits: totalQuantity, total: quantity } = await pixabayApi.fetchPhotos();\n\n    if (quantity === 0) {\n      loadMoreBtnEl.classList.add('is-hidden');\n      Notify.failure('Sorry, there are no images matching your search query. Please try again.', { clickToClose: true, });\n      return;\n    }\n\n    if (totalQuantity < pixabayApi.page * pixabayApi.perPage) {\n      loadMoreBtnEl.classList.add('is-hidden');\n    } else {\n      loadMoreBtnEl.classList.remove('is-hidden');\n    }\n\n    Notify.success(`Hooray! We found ${totalQuantity} images.`, { clickToClose: true, });\n\n    createGalleryCards(images);\n\n    lightbox.refresh();\n\n  } catch (error) {\n    console.log(error);\n  }\n\n};\n\nconst onLoadMoreBtnClick = async () => {\n  pixabayApi.incrementPage();\n\n  try {\n    const { hits: images, totalHits: totalQuantity, total: quantity } = await pixabayApi.fetchPhotos();\n\n    if (totalQuantity < pixabayApi.page * pixabayApi.perPage) {\n      loadMoreBtnEl.classList.add('is-hidden');\n      Notify.info(\"We're sorry, but you've reached the end of search results.\", { clickToClose: true, });\n    }\n\n    createGalleryCards(images)\n\n    lightbox.refresh();\n\n    autoScrollPage();\n\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nfunction clearMarkup() {\n  galleryListEl.innerHTML = '';\n}\n\nfunction autoScrollPage() {\n  const { height: cardHeight } =\n    galleryListEl.firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);"],"names":["$iQIUW","parcelRequire","$5d02bc51a35a2f22$var$searchFormEl","document","querySelector","$5d02bc51a35a2f22$var$galleryListEl","$5d02bc51a35a2f22$var$loadMoreBtnEl","classList","add","$5d02bc51a35a2f22$var$pixabayApi","$gAwcD","PixabayAPI","$5d02bc51a35a2f22$var$lightbox","$parcel$interopDefault","$fZKcF","captionsData","captionDelay","addEventListener","async","event","preventDefault","pageReset","innerHTML","searchQuery","currentTarget","elements","value","trim","toLowerCase","query","reset","Notify","info","clickToClose","hits","images","totalHits","totalQuantity","total","quantity","fetchPhotos","failure","page","perPage","remove","success","$aTcYB","createGalleryCards","refresh","error","console","log","incrementPage","height","cardHeight","firstElementChild","getBoundingClientRect","window","scrollBy","top","behavior","$5d02bc51a35a2f22$var$autoScrollPage"],"version":3,"file":"01-load-more.98e62cd0.js.map"}