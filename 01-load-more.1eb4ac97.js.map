{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,iEAMMC,EAAeC,SAASC,cAAc,gBACtCC,EAAgBF,SAASC,cAAc,YACvCE,EAAgBH,SAASC,cAAc,cAE7CE,EAAcC,UAAUC,IAAI,aAE5B,I,EAAMC,EAAa,IAAI,EAAAC,EAAAC,YAEnBC,EAAW,IAAIC,EAAAC,GAAJ,CAAmB,aAAc,CAC9CC,aAAc,MACdC,aAAc,MAGVC,G,EAAqBJ,EAAAb,EAAA,CAAAa,EAAAK,GAAAC,MAAA,SAAAC,EAAMC,G,IAKzBC,EAUgEC,EAAtDC,EAAmBC,E,qEAdnCJ,EAAMK,iBACNjB,EAAWkB,YA8DXtB,EAAcuB,UAAY,GA3DpBN,EAAcD,EAAMQ,cAAcC,SAAsB,YAAEC,MAAMC,OAAOC,cAC7ExB,EAAWyB,MAAQZ,EAEC,KAAhBA,EAAkB,C,sBACpBpB,EAAaiC,QACbC,EAAAC,OAAOC,KAAK,8BAA+B,CAAEC,cAAc,I,oDAKe9B,EAAW+B,c,WAAjBjB,EAA8BkB,EAAAC,KAA1FlB,EAA4DD,EAA5DoB,KAAclB,EAA8CF,EAA9CqB,UAEL,IAFmDrB,EAApBsB,MAE9B,C,uBAChBvC,EAAcC,UAAUC,IAAI,aAC5B4B,EAAAC,OAAOS,QAAQ,2EAA4E,CAAEP,cAAc,I,2BAIzGd,EAAgBhB,EAAWsC,KAAOtC,EAAWuC,QAC/C1C,EAAcC,UAAUC,IAAI,aAE5BF,EAAcC,UAAU0C,OAAO,aAGjCb,EAAAC,OAAOa,QAAQ,oBAAkCC,OAAd1B,EAAc,YAAW,CAAEc,cAAc,KAE5E,EAAAa,EAAAC,oBAAmB7B,GAEnBZ,EAAS0C,U,kDAGTC,QAAQC,IAAGf,EAAAgB,I,mEApCkBpC,G,iCAyC3BqC,EAAkB,W,MAAG7C,EAAAb,EAAA,CAAAa,EAAAK,GAAAC,MAAA,SAAAC,I,IAI6CG,EAAtDC,EAAmBC,E,yEAHnChB,EAAWkD,gB,kBAGiElD,EAAW+B,c,OAAjBjB,EAA8BkB,EAAAC,KAA1FlB,EAA4DD,EAA5DoB,KAAclB,EAA8CF,EAA9CqB,UAA8CrB,EAApBsB,MAE5CpB,EAAgBhB,EAAWsC,KAAOtC,EAAWuC,UAC/C1C,EAAcC,UAAUC,IAAI,aAC5B4B,EAAAC,OAAOC,KAAK,6DAA8D,CAAEC,cAAc,MAG5F,EAAAa,EAAAC,oBAAmB7B,GAEnBZ,EAAS0C,UAETM,I,kDAGAL,QAAQC,IAAGf,EAAAgB,I,4GAlBS,GA0BxB,SAASG,IACP,IAAQC,EACNxD,EAAcyD,kBAAkBC,wBAD1BC,OAGRC,OAAOC,SAAS,CACdC,IAAkB,EAAbN,EACLO,SAAU,U,CAIdlE,EAAamE,iBAAiB,SAAUpD,GACxCX,EAAc+D,iBAAiB,QAASX,E","sources":["src/partials/JS/01-load-more.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport { PixabayAPI } from './pixabay-API';\nimport { createGalleryCards } from './createGallery';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst searchFormEl = document.querySelector('.search-form');\nconst galleryListEl = document.querySelector('.gallery');\nconst loadMoreBtnEl = document.querySelector('.load-more');\n\nloadMoreBtnEl.classList.add('is-hidden');\n\nconst pixabayApi = new PixabayAPI();\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: \"alt\",\n  captionDelay: 250,\n});\n\nconst onSearchFormSubmit = async event => {\n  event.preventDefault();\n  pixabayApi.pageReset();\n  clearMarkup();\n\n  const searchQuery = event.currentTarget.elements['searchQuery'].value.trim().toLowerCase();\n  pixabayApi.query = searchQuery;\n\n  if (searchQuery === '') {\n    searchFormEl.reset();\n    Notify.info('Please enter search request', { clickToClose: true, });\n    return;\n  }\n\n  try {\n    const { hits: images, totalHits: totalQuantity, total: quantity } = await pixabayApi.fetchPhotos();\n\n    if (quantity === 0) {\n      loadMoreBtnEl.classList.add('is-hidden');\n      Notify.failure('Sorry, there are no images matching your search query. Please try again.', { clickToClose: true, });\n      return;\n    }\n\n    if (totalQuantity < pixabayApi.page * pixabayApi.perPage) {\n      loadMoreBtnEl.classList.add('is-hidden');\n    } else {\n      loadMoreBtnEl.classList.remove('is-hidden');\n    }\n\n    Notify.success(`Hooray! We found ${totalQuantity} images.`, { clickToClose: true, });\n\n    createGalleryCards(images);\n\n    lightbox.refresh();\n\n  } catch (error) {\n    console.log(error);\n  }\n\n};\n\nconst onLoadMoreBtnClick = async () => {\n  pixabayApi.incrementPage();\n\n  try {\n    const { hits: images, totalHits: totalQuantity, total: quantity } = await pixabayApi.fetchPhotos();\n\n    if (totalQuantity < pixabayApi.page * pixabayApi.perPage) {\n      loadMoreBtnEl.classList.add('is-hidden');\n      Notify.info(\"We're sorry, but you've reached the end of search results.\", { clickToClose: true, });\n    }\n\n    createGalleryCards(images)\n\n    lightbox.refresh();\n\n    autoScrollPage();\n\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nfunction clearMarkup() {\n  galleryListEl.innerHTML = '';\n}\n\nfunction autoScrollPage() {\n  const { height: cardHeight } =\n    galleryListEl.firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);"],"names":["$bpxeT","parcelRequire","$8ef701ec46d4372f$var$searchFormEl","document","querySelector","$8ef701ec46d4372f$var$galleryListEl","$8ef701ec46d4372f$var$loadMoreBtnEl","classList","add","$8ef701ec46d4372f$var$pixabayApi","$9uO0Q","PixabayAPI","$8ef701ec46d4372f$var$lightbox","$parcel$interopDefault","$5IjG7","captionsData","captionDelay","$8ef701ec46d4372f$var$onSearchFormSubmit","$2TvXO","mark","_callee","event","searchQuery","ref","images","totalQuantity","preventDefault","pageReset","innerHTML","currentTarget","elements","value","trim","toLowerCase","query","reset","$h6c0i","Notify","info","clickToClose","fetchPhotos","_ctx","sent","hits","totalHits","total","failure","page","perPage","remove","success","concat","$7g3w1","createGalleryCards","refresh","console","log","t0","$8ef701ec46d4372f$var$onLoadMoreBtnClick","incrementPage","$8ef701ec46d4372f$var$autoScrollPage","cardHeight","firstElementChild","getBoundingClientRect","height","window","scrollBy","top","behavior","addEventListener"],"version":3,"file":"01-load-more.1eb4ac97.js.map"}